{"ast":null,"code":"import _toConsumableArray from\"/Users/sagrario.meneses/code-game/amazon-search-collection/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/sagrario.meneses/code-game/amazon-search-collection/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Imports\n// --------------------------------\nimport React,{useState,useEffect}from'react';import{Header,Main,Item,Modal}from'./styles';// Render\n// --------------------------------\nexport default(function(){var _useState=useState([{name:\"Maybelline Base de Maquillaje Fit Me Matte, 220 Natural Beige\",url:\"/Maybelline-New-York-Matte-Plus/dp/B00PFCSURS/ref=sr_1_1?dchild=1&keywords=maquillaje&qid=1608078725&sr=8-1\",image:\"https://m.media-amazon.com/images/I/711tffepP1L._AC_UL320_.jpg\",price:\"142.00\"}]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),searchResults=_useState8[0],setSearchResults=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),timeoutState=_useState10[0],setTimeoutState=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),fetching=_useState12[0],setFetching=_useState12[1];var httpRequest=function httpRequest(query){fetch(\"http://localhost:5000/search?q=\".concat(query)).then(function(response){var json=response.json();if(response.ok){return json;}return Promise.reject('Something went wrong.');}).then(function(json){setSearchResults(json.data);setFetching(false);}).catch(function(e){console.log(\"e\",e);setFetching(false);});};var onChangeSearch=function onChangeSearch(event){setSearch(event.target.value);};var onKeyUpSearch=function onKeyUpSearch(event){if(search&&search.length>0){clearTimeout(timeoutState);setTimeoutState(setTimeout(function(){httpRequest(search);setFetching(true);},500));}};var onClickToggleModal=function onClickToggleModal(){setShowModal(!showModal);setSearchResults([]);setSearch(\"\");};var addItem=function addItem(item){return function(){setItems([].concat(_toConsumableArray(items),[item]));localStorage.setItem('myItems',JSON.stringify([].concat(_toConsumableArray(items),[item])));};};var deleteItem=function deleteItem(k){return function(){var newItems=[].concat(_toConsumableArray(items.slice(0,k)),_toConsumableArray(items.slice(k+1)));setItems(newItems);localStorage.setItem(\"myItems\",JSON.stringify(newItems));};};useEffect(function(){setItems(JSON.parse(localStorage.getItem(\"myItems\"))||[]);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Header,{background:\"https://pbs.twimg.com/profile_banners/1422058765/1482802543/1500x500\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://twitter.com/sagmmd\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"sagmmd\",src:\"https://pbs.twimg.com/profile_images/1336387092872617986/dB-XLxmd_400x400.jpg\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"@sagmmd\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Personal Wishlist\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:onClickToggleModal,children:\"Add Item\"})]}),/*#__PURE__*/_jsx(Main,{children:items&&items.length>0?/*#__PURE__*/_jsx(\"section\",{children:items.map(function(i,k){return/*#__PURE__*/_jsxs(Item,{children:[/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"...\"}),/*#__PURE__*/_jsx(\"dd\",{onClick:deleteItem(k),children:\"Delete\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",i.price]}),/*#__PURE__*/_jsx(\"img\",{alt:i.name,src:i.image}),/*#__PURE__*/_jsx(\"h3\",{children:i.name}),/*#__PURE__*/_jsx(\"a\",{href:\"https://www.amazon.com.mx\".concat(i.url),target:\"_blank\",rel:\"noopener noreferrer\",children:\"View On Amazon\"})]},\"Item-\".concat(k));})}):/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"No items yet\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{onClick:onClickToggleModal,children:\"Start By Adding An Item\"})]})})}),/*#__PURE__*/_jsx(Modal,{show:showModal,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClickToggleModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Add Item\"}),/*#__PURE__*/_jsx(\"input\",{disabled:fetching,type:\"search\",value:search,onChange:onChangeSearch,onKeyUp:onKeyUpSearch,placeholder:\"Search for products\"}),/*#__PURE__*/_jsxs(\"section\",{children:[fetching&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"38\",height:\"38\",viewBox:\"0 0 38 38\",stroke:\"#666666\",children:/*#__PURE__*/_jsx(\"g\",{fill:\"none\",children:/*#__PURE__*/_jsxs(\"g\",{transform:\"translate(1 1)\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{strokeOpacity:\".5\",cx:\"18\",cy:\"18\",r:\"18\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M36 18c0-9.94-8.06-18-18-18\",transform:\"rotate(277.527 18 18)\",children:/*#__PURE__*/_jsx(\"animateTransform\",{attributeName:\"transform\",type:\"rotate\",from:\"0 18 18\",to:\"360 18 18\",dur:\"1s\",repeatCount:\"indefinite\"})})]})})})}),!fetching&&searchResults&&searchResults.length>0&&searchResults.map(function(i,k){return/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{alt:i.name,src:i.image})}),/*#__PURE__*/_jsx(\"h3\",{children:i.name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",i.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:addItem(i),children:\"+\"})]},\"items-\".concat(k));})]})]})})]});});","map":{"version":3,"sources":["/Users/sagrario.meneses/code-game/amazon-search-collection/src/components/App/index.js"],"names":["React","useState","useEffect","Header","Main","Item","Modal","name","url","image","price","items","setItems","showModal","setShowModal","search","setSearch","searchResults","setSearchResults","timeoutState","setTimeoutState","fetching","setFetching","httpRequest","query","fetch","then","response","json","ok","Promise","reject","data","catch","e","console","log","onChangeSearch","event","target","value","onKeyUpSearch","length","clearTimeout","setTimeout","onClickToggleModal","addItem","item","localStorage","setItem","JSON","stringify","deleteItem","k","newItems","slice","parse","getItem","map","i"],"mappings":"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","sourcesContent":["// Imports\n// --------------------------------\nimport React, { useState, useEffect } from 'react';\nimport { Header, Main, Item , Modal} from './styles';\n\n// Render\n// --------------------------------\nexport default () => {\n    const [items, setItems] = useState([\n        {\n            name: \"Maybelline Base de Maquillaje Fit Me Matte, 220 Natural Beige\",\n            url: \"/Maybelline-New-York-Matte-Plus/dp/B00PFCSURS/ref=sr_1_1?dchild=1&keywords=maquillaje&qid=1608078725&sr=8-1\",\n            image: \"https://m.media-amazon.com/images/I/711tffepP1L._AC_UL320_.jpg\",\n            price: \"142.00\",\n        },\n    ]);\n\n    const [showModal, setShowModal] = useState(false);\n    const [search, setSearch] = useState(\"\");\n    const [searchResults, setSearchResults] = useState([]);\n    const [timeoutState, setTimeoutState] = useState(null);\n    const [fetching, setFetching] = useState(false);\n\n    const httpRequest = query => {\n        fetch(`http://localhost:5000/search?q=${query}`)\n            .then((response) => {\n                const json = response.json();\n\n                if (response.ok) {\n                    return json;\n                }\n                return Promise.reject('Something went wrong.');\n            })\n            .then((json) => {\n                setSearchResults(json.data);\n                setFetching(false);\n            })\n            .catch((e) => {\n                console.log(\"e\", e);\n                setFetching(false);\n            });\n    };\n\n    const onChangeSearch = (event) => {\n        setSearch(event.target.value);\n    };\n\n    const onKeyUpSearch = (event) => {\n        if (search && search.length > 0) {\n            clearTimeout(timeoutState);\n            setTimeoutState(\n                setTimeout(() => {\n                    httpRequest(search);\n                    setFetching(true);\n                }, 500)\n            );\n        }\n    };\n\n    const onClickToggleModal = () => {\n        setShowModal(!showModal);\n        setSearchResults([]);\n        setSearch(\"\");\n    }\n\n    const addItem = item => () => {\n        setItems([...items, item]);\n        localStorage.setItem('myItems', JSON.stringify([...items, item]));\n    }\n\n    const deleteItem = (k) => () => {\n        const newItems = [...items.slice(0, k), ...items.slice(k + 1)];\n        setItems(newItems);\n        localStorage.setItem(\"myItems\", JSON.stringify(newItems));\n    };\n\n    useEffect(() => {\n        setItems(JSON.parse(localStorage.getItem(\"myItems\")) || []);\n    }, []);\n\n    return (\n        <div>\n            <Header background=\"https://pbs.twimg.com/profile_banners/1422058765/1482802543/1500x500\">\n                <div>\n                    <a href=\"https://twitter.com/sagmmd\">\n                        <img alt=\"sagmmd\"\n                             src=\"https://pbs.twimg.com/profile_images/1336387092872617986/dB-XLxmd_400x400.jpg\"/>\n                        <h1>@sagmmd</h1>\n                        <p>Personal Wishlist</p>\n                    </a>\n                </div>\n                <button onClick={onClickToggleModal}>Add Item</button>\n            </Header>\n\n            <Main>\n                {items && items.length > 0 ? (\n                    <section>\n                        {items.map((i, k) => (\n                            <Item key={`Item-${k}`}>\n                                <dl>\n                                    <dt>...</dt>\n                                    <dd onClick={deleteItem(k)}>Delete</dd>\n                                </dl>\n                                <span>${i.price}</span>\n                                <img alt={i.name} src={i.image} />\n                                <h3>{i.name}</h3>\n                                <a href={`https://www.amazon.com.mx${i.url}`} target=\"_blank\" rel=\"noopener noreferrer\">View On Amazon</a>\n                            </Item>\n                        ))}\n                    </section>\n                ) : (\n                    <section><p>No items yet<br/>\n                    <span onClick={onClickToggleModal}>Start By Adding An Item</span></p></section>\n                )}\n            </Main>\n\n            <Modal show={showModal}>\n                <div>\n                    <button onClick={onClickToggleModal}>&times;</button>\n                    <h1>Add Item</h1>\n                    <input\n                        disabled={fetching}\n                        type=\"search\"\n                        value={search}\n                        onChange={onChangeSearch}\n                        onKeyUp={onKeyUpSearch}\n                        placeholder=\"Search for products\"\n                    />\n                    <section>\n                        {fetching && (\n                            <div>\n                                <svg\n                                    xmlns=\"http://www.w3.org/2000/svg\"\n                                    width=\"38\"\n                                    height=\"38\"\n                                    viewBox=\"0 0 38 38\"\n                                    stroke=\"#666666\"\n                                >\n                                    <g fill=\"none\">\n                                        <g transform=\"translate(1 1)\" strokeWidth=\"2\">\n                                            <circle strokeOpacity=\".5\" cx=\"18\" cy=\"18\" r=\"18\" />\n                                            <path\n                                                d=\"M36 18c0-9.94-8.06-18-18-18\"\n                                                transform=\"rotate(277.527 18 18)\"\n                                            >\n                                                <animateTransform\n                                                    attributeName=\"transform\"\n                                                    type=\"rotate\"\n                                                    from=\"0 18 18\"\n                                                    to=\"360 18 18\"\n                                                    dur=\"1s\"\n                                                    repeatCount=\"indefinite\"\n                                                />\n                                            </path>\n                                        </g>\n                                    </g>\n                                </svg>\n                            </div>\n                        )}\n                        {!fetching &&\n                        searchResults &&\n                        searchResults.length > 0 &&\n                        searchResults.map((i, k) => (\n                            <article key={`items-${k}`}>\n                                <div>\n                                    <img alt={i.name} src={i.image} />\n                                </div>\n                                <h3>{i.name}</h3>\n                                <span>${i.price}</span>\n                                <button onClick={addItem(i)}>+</button>\n                            </article>\n                        ))}\n                    </section>\n                </div>\n            </Modal>\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}